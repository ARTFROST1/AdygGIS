# ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–î–∞—Ç–∞:** 11 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —Ç—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

---

## üîß –í–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ Fallback –Ω–∞ bundled JSON –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ offline

**–§–∞–π–ª:** `AttractionRepositoryImpl.kt`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –æ—Å—Ç–∞–≤–ª—è–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—É—Å—Ç—ã–º.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Room –ø–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º —Ä–µ—à–µ–Ω–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–µ
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç –∏ Supabase –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Å–µ—Ç–∏ (—Å timeout 2 —Å–µ–∫)
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ—Ç–∏ –Ω–∞ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ `assets/attractions.json`
- –í—ã–Ω–µ—Å–µ–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `loadFromAssetsJson()` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ö–æ–¥:**
```kotlin
// –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏ —Å timeout
val isOnline = try {
    withTimeout(2000) {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ ConnectivityManager
    }
} catch (e: Exception) {
    false
}

if (!isOnline) {
    // Offline –Ω–∞ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON
    Timber.w("‚ö†Ô∏è First launch offline - loading from bundled JSON as fallback")
    loadFromAssetsJson()
    return
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ bundled JSON –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ü–æ–∑–∂–µ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Supabase

---

### 2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏

**–§–∞–π–ª:** `MapViewModel.kt`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞) –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è: `isSyncSuccessful` –∏ `isSyncInProgress`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `observeNetworkChanges()` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ç–∏
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–ö–æ–¥:**
```kotlin
// –í init –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤
init {
    loadAttractions()
    observeLocationSettings()
    observeDataVersionChanges()
    observeNetworkChanges()  // ‚Üê –ù–û–í–û–ï
    performInitialSupabaseSync()
}

private fun observeNetworkChanges() {
    viewModelScope.launch {
        networkUseCase.getNetworkStatus().collect { status ->
            when (status) {
                is NetworkStatus.Connected -> {
                    if (!isSyncSuccessful && !isSyncInProgress) {
                        Timber.d("üåê Network restored, retrying sync...")
                        performInitialSupabaseSync()
                    }
                }
                // ...
            }
        }
    }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø—Ä–æ—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

### 3. ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö (tombstones)

**–§–∞–π–ª:** `SyncService.kt`

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- Tombstones –±—ã–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã (–≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫)
- –£–¥–∞–ª—ë–Ω–Ω—ã–µ –≤ Supabase –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –≠—Ç–æ –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è - —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –í–∫–ª—é—á–µ–Ω—ã tombstones –¥–ª—è delta sync
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ tombstones –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è (–Ω–µ—Ç —Å–º—ã—Å–ª–∞)
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è—Ö –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —É–¥–∞–ª—ë–Ω–Ω—ã–µ ID
- –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å tombstones –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è (graceful degradation)
- –£–¥–∞–ª—ë–Ω–Ω—ã–µ attractions –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ Room DB

**–ö–æ–¥:**
```kotlin
// –í–º–µ—Å—Ç–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞:
// val deletedResult = NetworkResult.Success(emptyList<String>())

// –¢–µ–ø–µ—Ä—å —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å tombstones:
val deletedResult = if (isFirstSync) {
    // –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è - tombstones –Ω–µ –Ω—É–∂–Ω—ã
    NetworkResult.Success(emptyList<String>())
} else {
    // Delta sync - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º tombstones
    Timber.d("üì• Fetching tombstones since $syncSince")
    remoteDataSource.getTombstones(syncSince)
}

val deletedIds = when (deletedResult) {
    is NetworkResult.Success -> deletedResult.data
    is NetworkResult.Error -> {
        // –ù–µ –ø–∞–¥–∞–µ–º, –µ—Å–ª–∏ tombstones –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã
        Timber.w("‚ö†Ô∏è Could not fetch tombstones: ${deletedResult.message}")
        emptyList()
    }
}

// –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ Room
deletedIds.forEach { id ->
    attractionDao.deleteAttractionById(id)
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ + —É–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ –£–¥–∞–ª—ë–Ω–Ω—ã–µ –≤ Supabase –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ Graceful degradation - –µ—Å–ª–∏ tombstones –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ tombstones –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

---

## üìä –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –ü—Ä–æ–±–ª–µ–º–∞ | –î–æ | –ü–æ—Å–ª–µ | –°—Ç–∞—Ç—É—Å |
|----------|----|----|--------|
| –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ offline | ‚ùå –ü—É—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û |
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∏ | ‚ùå –ù–µ—Ç retry | ‚úÖ –ê–≤—Ç–æ-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û |
| Tombstones | ‚ùå –û—Ç–∫–ª—é—á–µ–Ω—ã | ‚úÖ –í–∫–ª—é—á–µ–Ω—ã | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ offline
```
1. –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ: adb shell pm clear com.adygyes.app
2. –í–∫–ª—é—á–∏—Ç—å Airplane Mode
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –º–∞—Ä–∫–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ (–∏–∑ JSON)
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
AttractionRepositoryImpl: ‚ö†Ô∏è First launch offline - loading from bundled JSON as fallback
AttractionRepositoryImpl: üì¶ Loading attractions from bundled JSON...
AttractionRepositoryImpl: ‚úÖ Loaded 50 attractions from bundled JSON
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∏
```
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
2. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–ø—ã—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. –í–∫–ª—é—á–∏—Ç—å WiFi (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
MapViewModel: üåê Network restored, retrying sync...
SyncService: üîÑ Starting sync with Supabase... (connection: WiFi)
SyncService: ‚úÖ Sync complete: +0 updated=0 deleted=0
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Tombstones (—É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
```
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
2. –í Supabase —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å is_published=false –¥–ª—è attraction
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (delta sync)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: attraction –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å —Å –∫–∞—Ä—Ç—ã
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
SyncService: üì• Fetching tombstones since 2026-01-11T12:00:00Z
SyncService: üìä Sync data: 0 updated/new, 1 deleted
SyncService: ‚úÖ Sync complete: +0 updated=0 deleted=1
```

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. AttractionRepositoryImpl.kt
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏ —Å timeout
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ bundled JSON –ø—Ä–∏ offline
- ‚úÖ –í—ã–Ω–µ—Å–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadFromAssetsJson()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã: `withTimeout`, `TimeoutCancellationException`

### 2. MapViewModel.kt
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏: `isSyncSuccessful`, `isSyncInProgress`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `observeNetworkChanges()`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `performInitialSupabaseSync()` —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –í `init` –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `observeNetworkChanges()`

### 3. SyncService.kt
- ‚úÖ –í–∫–ª—é—á–µ–Ω—ã tombstones –¥–ª—è delta sync
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ tombstones –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø—Ä–æ—Å–∞ tombstones
- ‚úÖ –£–¥–∞–ª—ë–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –ø—Ä–æ–ø—É—Å–∫–µ tombstones

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [x] ‚úÖ –†–∞–±–æ—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ offline
- [x] ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏
- [x] ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ + —É–¥–∞–ª–µ–Ω–∏–µ)
- [x] ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- [x] ‚úÖ Graceful degradation –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):
- [ ] UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] Pull-to-Refresh –¥–ª—è —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] WorkManager –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] Backup favorites –≤ SharedPreferences

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [SYNC_ANALYSIS_AND_EDGE_CASES.md](./SYNC_ANALYSIS_AND_EDGE_CASES.md) - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- [QUICK_SYNC_ISSUES.md](./QUICK_SYNC_ISSUES.md) - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- [TESTING_CHECKLIST_COMPLETE.md](./TESTING_CHECKLIST_COMPLETE.md) - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Bundled JSON:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª `assets/attractions.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **Network Listener:** –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ API 21+ (—É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º)
3. **Tombstones:** –¢—Ä–µ–±—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ Supabase (RLS –ø–æ–ª–∏—Ç–∏–∫–∏)
4. **Performance:** Network check —Å timeout 2 —Å–µ–∫ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** üöÄ Ready for testing  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–î–∞—Ç–∞:** 11 —è–Ω–≤–∞—Ä—è 2026
