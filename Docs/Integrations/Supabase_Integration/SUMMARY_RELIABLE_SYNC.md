# üîÑ –°—É–º–º–∞—Ä–Ω—ã–π –æ—Ç—á—ë—Ç: –ù–∞–¥—ë–∂–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Supabase

**–î–∞—Ç–∞:** 8 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ó–∞–¥–∞—á–∞:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Å–æ—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìù –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Supabase —Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∞ WiFi, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∞ —Å–æ—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (4G/3G), —Ö–æ—Ç—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω.

---

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ —Ç–∞–π–º–∞—É—Ç—ã** (10-15 —Å–µ–∫—É–Ω–¥) –¥–ª—è —Å–æ—Ç–æ–≤—ã—Ö —Å–µ—Ç–µ–π
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ retry logic** - –æ–¥–Ω–∞ –Ω–µ—É–¥–∞—á–∞ = –ø—Ä–æ–≤–∞–ª –≤—Å–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - `usesCleartextTraffic="true"`
4. **–ù–µ—Ç network_security_config.xml**
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞ —Å–µ—Ç–∏** –ø–µ—Ä–µ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
6. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - `select=*` –±–µ–∑ —Å–∂–∞—Ç–∏—è
7. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ DNS –æ—à–∏–±–æ–∫**

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. Network Security Config ‚úÖ
- –°–æ–∑–¥–∞–Ω [network_security_config.xml](../../../app/src/main/res/xml/network_security_config.xml)
- –°—Ç—Ä–æ–≥–æ–µ HTTPS –¥–ª—è Supabase
- –ó–∞—â–∏—Ç–∞ –æ—Ç MITM –∞—Ç–∞–∫
- –û–±–Ω–æ–≤–ª—ë–Ω AndroidManifest.xml

### 2. RetryInterceptor —Å Exponential Backoff ‚úÖ
- –°–æ–∑–¥–∞–Ω [RetryInterceptor.kt](../../../app/src/main/java/com/adygyes/app/data/remote/RetryInterceptor.kt)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
- Exponential backoff: 1s ‚Üí 2s ‚Üí 4s
- –û–±—Ä–∞–±–æ—Ç–∫–∞: timeout, DNS, SSL, IO errors

### 3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã ‚úÖ
- **Connect:** 15s (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- **Read:** 10s ‚Üí **25s**
- **Write:** 15s (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- **Call (–Ω–æ–≤—ã–π):** **120s** (–æ–±—â–∏–π –±—é–¥–∂–µ—Ç –¥–ª—è request+retry)

### 4. DNS (DoH + fallback) ‚úÖ
- DoH (Cloudflare) –¥–ª—è Supabase-—Ö–æ—Å—Ç–æ–≤
- Fallback –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π DNS
- –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ/–æ—à–∏–±–æ—á–Ω–æ–≥–æ DNS –Ω–∞ —Å–æ—Ç–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞—Ö

### 5. Connection Pooling ‚úÖ
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TCP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –î–æ 5 idle —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- Keep-alive: 30 —Å–µ–∫—É–Ω–¥

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏ –ø–µ—Ä–µ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π ‚úÖ
- –û–±–Ω–æ–≤–ª—ë–Ω [SyncService.kt](../../../app/src/main/java/com/adygyes/app/data/sync/SyncService.kt)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–µ—Ç–∏ (WiFi/Cellular/None)
- –ü–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- Graceful degradation –¥–ª—è tombstones

### 7. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ ‚úÖ
- **Selective field fetching** –≤–º–µ—Å—Ç–æ `select=*`
- **Gzip compression** (`Accept-Encoding: gzip`)
- **Batch processing** –ë–î –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–æ 50 –∑–∞–ø–∏—Å–µ–π)
- –≠–∫–æ–Ω–æ–º–∏—è: **–¥–æ 80% —Ç—Ä–∞—Ñ–∏–∫–∞**

### 8. –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Dagger ‚úÖ
- –û–±–Ω–æ–≤–ª—ë–Ω [SyncModule.kt](../../../app/src/main/java/com/adygyes/app/di/module/SyncModule.kt)
- –î–æ–±–∞–≤–ª–µ–Ω NetworkUseCase –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ SyncService

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `app/src/main/res/xml/network_security_config.xml` ‚ú®
2. `app/src/main/java/com/adygyes/app/data/remote/RetryInterceptor.kt` ‚ú®
3. `Docs/Integrations/Supabase_Integration/RELIABLE_SYNC_IMPLEMENTATION.md` üìö
4. `Docs/Integrations/Supabase_Integration/SYNC_TESTING_CHECKLIST.md` üìö

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `app/src/main/AndroidManifest.xml` - –¥–æ–±–∞–≤–ª–µ–Ω network_security_config
2. `app/src/main/java/com/adygyes/app/di/module/NetworkModule.kt` - retry, DNS, timeouts
3. `app/src/main/java/com/adygyes/app/data/sync/SyncService.kt` - network checks, error handling
4. `app/src/main/java/com/adygyes/app/data/remote/api/SupabaseApiService.kt` - gzip, selective fields
5. `app/src/main/java/com/adygyes/app/di/module/SyncModule.kt` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

---

## üìä –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| **WiFi sync** | 5-10s | 5-10s | = |
| **4G sync** | ‚ùå timeout | 15-30s | ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **3G sync** | ‚ùå timeout | 30-60s | ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **Retry –Ω–∞ –æ—à–∏–±–∫–∞—Ö** | ‚ùå –Ω–µ—Ç | ‚úÖ 3 –ø–æ–ø—ã—Ç–∫–∏ | üöÄ |
| **–†–∞–∑–º–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤** | 100% | ~20% | üì¶ -80% |
| **DB –æ–ø–µ—Ä–∞—Ü–∏–∏** | –ø–æ 1 | –ø–æ 50 | ‚ö° +500% |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
‚úÖ WiFi —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è  
‚úÖ 4G/LTE —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è  
‚úÖ 3G —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è  
‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ WiFi ‚Üî Cellular  
‚úÖ –ö—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–æ—Ç–µ—Ä—è —Å–≤—è–∑–∏  
‚úÖ –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (graceful error)

### Logcat –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```bash
adb logcat -s SyncService:D RetryInterceptor:D NetworkModule:D
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ WiFi
- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–æ—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (4G, 3G)
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
- [x] –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- [x] –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- [x] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ (-80%)
- [x] –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. [RELIABLE_SYNC_IMPLEMENTATION.md](./RELIABLE_SYNC_IMPLEMENTATION.md) - –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
2. [SYNC_TESTING_CHECKLIST.md](./SYNC_TESTING_CHECKLIST.md) - —á–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**
   - WiFi ‚Üí Cellular –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
   - –†–∞–∑–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å–≤—è–∑–∏
   - –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–µ—Ç—å (3G)

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production**
   - Crashlytics –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
   - Metrics –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - User feedback

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–±—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è):
- [ ] WorkManager –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] Incremental sync optimization
- [ ] Offline queue –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤
- [ ] Push notifications –ø—Ä–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üí° –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

1. ‚úÖ **Exponential backoff** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –¥–ª—è retry
2. ‚úÖ **Connection pooling** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TCP
3. ‚úÖ **Timeout tuning** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ mobile networks
4. ‚úÖ **Graceful degradation** - —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö
5. ‚úÖ **Network awareness** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏
6. ‚úÖ **Data optimization** - gzip + selective fields
7. ‚úÖ **Batch processing** - —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î
8. ‚úÖ **User-friendly errors** - –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
9. ‚úÖ **HTTPS enforcement** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
10. ‚úÖ **DNS resilience** - fallback –º–µ—Ö–∞–Ω–∏–∑–º

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Logcat (—Ñ–∏–ª—å—Ç—Ä: `SyncService|RetryInterceptor`)
2. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ WiFi
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–î–∞—Ç–∞:** 8 —è–Ω–≤–∞—Ä—è 2026
