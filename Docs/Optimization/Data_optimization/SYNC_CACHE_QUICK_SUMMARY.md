# ‚ö° Quick Summary: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

**–î–∞—Ç–∞:** 6 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üéØ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏:

### 1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ** üîÑ
- Delta sync —Å Supabase (—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- –ë—ã—Å—Ç—Ä–æ (—Å–µ–∫—É–Ω–¥—ã)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ –∫—ç—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### 2. **–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à** üóëÔ∏è
- –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Full sync —Å Supabase —Å –Ω—É–ª—è
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏

---

## ü§î –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞?

| –ê—Å–ø–µ–∫—Ç | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è | –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ |
|--------|---------------|--------------|
| **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç** | –ü–æ–ª—É—á–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è | –£–¥–∞–ª—è–µ—Ç –≤—Å—ë + –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–∞–Ω–æ–≤–æ |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | ‚ö° –ë—ã—Å—Ç—Ä–æ | üêå –ú–µ–¥–ª–µ–Ω–Ω–æ |
| **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** | ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è | ‚ùå –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è |
| **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** | ‚úÖ –û—Å—Ç–∞—é—Ç—Å—è | ‚ùå –£–¥–∞–ª—è—é—Ç—Å—è |
| **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** | –†–µ–≥—É–ª—è—Ä–Ω–æ | –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö |

**–í—ã–≤–æ–¥:** –û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ —Å Supabase, –Ω–æ —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** = –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (delta)
- **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞** = –ø–æ–ª–Ω—ã–π reset + reload

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **SettingsViewModel.kt** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:
   - `performSync()` - delta sync
   - `clearCacheAndSync()` - full clear + sync
   - –°–æ—Å—Ç–æ—è–Ω–∏—è: `isSyncing`, `isClearing`, `lastSyncTimestamp`

2. **SettingsScreen.kt** - –¥–æ–±–∞–≤–ª–µ–Ω—ã UI —ç–ª–µ–º–µ–Ω—Ç—ã:
   - "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ" —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à" —Å –¥–∏–∞–ª–æ–≥–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## üé® UI —ç–ª–µ–º–µ–Ω—Ç—ã

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```
üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
   –ü–æ—Å–ª–µ–¥–Ω—è—è: 06.01.2026 15:30
```

–í–æ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
```
üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (disabled)
   –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
```
üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
   –ó–∞–Ω—è—Ç–æ: 245.7 –ú–ë
```

–ü—Ä–∏ –∫–ª–∏–∫–µ ‚Üí –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à?                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ      ‚îÇ
‚îÇ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã–µ. –ë—É–¥–µ—Ç     ‚îÇ
‚îÇ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è  ‚îÇ
‚îÇ —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?         ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  [–û—Ç–º–µ–Ω–∞]        [–û—á–∏—Å—Ç–∏—Ç—å]     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–í–æ –≤—Ä–µ–º—è –æ—á–∏—Å—Ç–∫–∏:
```
üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à (disabled)
   –û—á–∏—Å—Ç–∫–∞...
```

---

## üîß –õ–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (performSync)

```kotlin
1. _isSyncing = true
2. dataSyncUseCase.syncData()  // Delta sync (flow)
3. –°–ª–µ–¥–∏—Ç—å –∑–∞ SyncProgress –¥–æ Completed/Error
4. –û–±–Ω–æ–≤–∏—Ç—å lastSyncTimestamp
5. _isSyncing = false
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ (clearCacheAndSync)

```kotlin
1. _isClearing = true
2. attractionDao.deleteAll()           // –û—á–∏—Å—Ç–∏—Ç—å Room
3. imageCacheManager.clearAllCache()   // –û—á–∏—Å—Ç–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. cacheManager.clearAllCache()        // –°–±—Ä–æ—Å–∏—Ç—å timestamp
5. dataSyncUseCase.forceRefresh()      // Full sync
6. –û–±–Ω–æ–≤–∏—Ç—å SyncProgress (Completed/Error)
7. –û–±–Ω–æ–≤–∏—Ç—å lastSyncTimestamp
8. _isClearing = false
```

---

## üìä –î–∞–Ω–Ω—ã–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ SettingsViewModel:
- `dataSyncUseCase: DataSyncUseCase` - –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- `imageCacheManager: ImageCacheManager` - –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `attractionDao: AttractionDao` - –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ Room –ë–î

### –ù–æ–≤—ã–µ StateFlows:
- `isSyncing: StateFlow<Boolean>` - –∏–¥—ë—Ç –ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- `isClearing: StateFlow<Boolean>` - –∏–¥—ë—Ç –ª–∏ –æ—á–∏—Å—Ç–∫–∞
- `lastSyncTimestamp: StateFlow<String?>` - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **Offline-first —Å–æ—Ö—Ä–∞–Ω—ë–Ω** - –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
2. **–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞** - delta –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, full –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
3. **–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫** - –¥–∏–∞–ª–æ–≥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, disabled states
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç—É—Å
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±—ã—Å—Ç—Ä–∞—è –±–ª–∞–≥–æ–¥–∞—Ä—è delta sync

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∫–∞–∂–¥—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π)
- ‚úÖ –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–µ—Å—Ç –≤ Supabase
- ‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω—ã —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ

### –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
- ‚úÖ –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –¥–∞–Ω–Ω—ã–º–∏ (corruption)
- ‚úÖ –î–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚úÖ –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ï—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [SYNC_AND_CACHE_CLEAR_IMPLEMENTATION.md](./SYNC_AND_CACHE_CLEAR_IMPLEMENTATION.md)

–í–∫–ª—é—á–∞–µ—Ç:
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- –î–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ UI
